# chatgpt-wechat

å¾®ä¿¡ç”¨æˆ·å¯è‡ªå»ºçš„ ChatGPT æœºå™¨äºº

## æ•ˆæœå¦‚å›¾

![image1.png](./doc/image1.png)

## å¦‚ä½•ä½¿ç”¨æœ¬é¡¹ç›®ä»£ç ï¼Ÿ

### 1. åˆ›å»ºä¸ªäººä¼ä¸šå¾®ä¿¡ å¹¶è·å–åˆ°å¯¹åº”çš„ ä¼ä¸šid(corp_id)

è®¿é—® [ç®¡ç†å‘˜é¡µé¢](https://work.weixin.qq.com/wework_admin/frame#profile) ,
å¯åœ¨ æˆ‘çš„ä¼ä¸š > ä¼ä¸šä¿¡æ¯ > åº•éƒ¨ çœ‹åˆ°  ä¼ä¸šID

### 1. åˆ›å»ºä¸€ä¸ªä¼ä¸šå¾®ä¿¡å†…éƒ¨åº”ç”¨ï¼Œå¹¶è·å–åˆ° AgentId å’Œ Secret

å¯åœ¨ æˆ‘çš„ä¼ä¸š > åº”ç”¨ç®¡ç† > è‡ªå»º  çœ‹åˆ°åˆ›å»ºåº”ç”¨ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º **ChatGPT** çš„åº”ç”¨ï¼Œå¹¶ä¸Šä¼ åº”ç”¨å¤´åƒã€‚åˆ›å»ºå®Œæˆåå¯ä»¥åœ¨åº”ç”¨è¯¦æƒ…é¡µçœ‹åˆ°åˆ° AgentId å’Œ Secret
![image3.png](./doc/image3.png)

### 2. ç‚¹å‡»å¯ç”¨æ¶ˆæ¯

ä¼šè¿›å…¥éªŒè¯æ­¥éª¤, å…ˆä¸éªŒè¯ url æˆ‘ä»¬å¯ä»¥ æ‹¿åˆ°  Token è·Ÿ EncodingAESKey
![image2.png](./doc/image2.png)

### 3. è®¿é—® [é˜¿é‡Œäº‘å‡½æ•°è®¡ç®— fc ](https://fcnext.console.aliyun.com/cn-hangzhou/services) ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®

ç™»å½• [é˜¿é‡Œäº‘å‡½æ•°è®¡ç®— fc](https://fcnext.console.aliyun.com/cn-hangzhou/services) ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ Node.js v16 çš„æœåŠ¡ï¼ŒæœåŠ¡åå¯ä»¥æ ¹æ®ä½ çš„éœ€è¦å¡«å†™ï¼Œå¯ä»¥å¡«å†™ ChatGPT .

![image4.png](./doc/image4.png)

å†åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°åä¹Ÿå¯ä»¥éšæ„

![image5.png](./doc/image5.png)

### 4. å¤åˆ¶æœ¬é¡¹ç›®ä¸‹çš„ aliyunfc/index.js çš„æºç å†…å®¹ï¼Œå¹¶ç²˜è´´åˆ° webide å½“ä¸­

ç„¶åç‚¹å‡»é¡¶éƒ¨çš„ deploy ï¼Œå®Œæˆç¬¬ä¸€æ¬¡éƒ¨ç½²ã€‚

![image6.png](./doc/image6.png)

### 5. å®‰è£…æ‰€éœ€ä¾èµ–

è¿™ä¸ªå¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¼ä¸šå¾®ä¿¡å¼€æ”¾å¹³å°å®˜æ–¹æä¾›çš„ SDKï¼Œä»¥åŠ axios æ¥å®Œæˆè°ƒç”¨ã€‚åœ¨webideä¸­å¼€å¯ç»ˆç«¯ï¼Œå®‰è£… `axios` å’Œ `@wecom/crypto` è¿˜æœ‰ `xmlreader`ã€‚

```shell
npm i axios
npm i @wecom/crypto
npm i xmlreader
```

![image7.png](./doc/image7.png)

å®‰è£…å®Œæˆåï¼Œç‚¹å‡»ä¸Šæ–¹çš„éƒ¨ç½²ï¼Œä½¿å…¶ç”Ÿæ•ˆã€‚

### 6. é…ç½®ç¯å¢ƒå˜é‡

æ¥ä¸‹æ¥æˆ‘ä»¬å›åˆ°å‡½æ•°ç®¡ç†æ¥é…ç½®ç¯å¢ƒå˜é‡ï¼Œä½ éœ€è¦é…ç½®ä¸¤ä¸ªä¸ªç¯å¢ƒå˜é‡ `aes_key` å’Œ `aes_token` `aes_key` å¡«å†™ä½ ç¬¬äºŒæ­¥è·å–åˆ°çš„ EncodingAESKeyï¼Œ`aes_token` å¡«å†™ä½ ç¬¬äºŒæ­¥è·å–åˆ°çš„ Tokenã€‚
![image8.png](./doc/image8.png)

é…ç½®å®Œæˆï¼Œç‚¹ç¡®è®¤åï¼Œå†æ¬¡ç‚¹å‡»ä¸Šæ–¹çš„ **Deploy** æŒ‰é’®éƒ¨ç½²ï¼Œä½¿è¿™äº›ç¯å¢ƒå˜é‡ç”Ÿæ•ˆã€‚è¿™ä¸ªæ—¶å€™å» ä¼ä¸šå¾®ä¿¡é‡Œé¢ï¼Œ
![image12.png](./doc/image12.png)
å¡«å…¥å‡½æ•°çš„ url , ç‚¹å‡»ä¿å­˜, éªŒè¯å°±é€šè¿‡äº†.
![image11.png](./doc/image11.png)

url å¯ä»¥é€šè¿‡å‡½æ•°çš„è§¦å‘å™¨ç®¡ç†é¡µé¢è·å–~
![image9.png](./doc/image9.png)

### 7. è·å– OpenAI çš„ KEY ï¼Œå¹¶é…ç½®ç¯å¢ƒå˜é‡

è®¿é—® [Account API Keys - OpenAI API](https://platform.openai.com/account/api-keys) ï¼Œç‚¹å‡» `Create new secret key` ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ key ï¼Œå¹¶ä¿å­˜å¤‡ç”¨ã€‚
![image10.png](./doc/image10.png)

### 8. åœ¨è‡ªè´­æœåŠ¡å™¨ä¸Š éƒ¨ç½² golang æœåŠ¡ï¼Œå¹¶å¼€å¯ç«¯å£ è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±æ‹¿åˆ°äº† req_host

- è¿™éƒ¨åˆ†ï¼Œæ–°çš„åç«¯æ¡†æ¶åˆšåˆšä¸Šæ‰‹ï¼Œå†™çš„æ¯”è¾ƒä¸‘ğŸ˜“ï¼Œç¨å¾®ä¼˜åŒ–åï¼Œå‘¨æœ«ä¼šå‘åˆ°ä»“åº“ `chat/` ç›®å½•ä¸‹

### 9. æ­£å¼å¸ƒå‘å¸ƒä¸å¾®ä¿¡æ‰“é€š

å¯åœ¨ æˆ‘çš„ä¼ä¸š > å¾®ä¿¡æ’ä»¶ > ä¸‹æ–¹æ‰¾åˆ° ä¸€ä¸ªé‚€è¯·å…³æ³¨äºŒç»´ç ï¼Œ
![image13.png](./doc/image13.png)

å¾®ä¿¡æ‰«ç åï¼Œå°±å¯ä»¥åœ¨ å¾®ä¿¡ä¸­çœ‹åˆ°å¯¹åº”çš„å…¬å¸åç§°ï¼Œç‚¹è¿›ä¼ä¸šå·åº”ç”¨ï¼Œæˆ‘ä»¬çš„æœºå™¨äººï¼Œèµ«ç„¶åœ¨åˆ—ã€‚

ä¸Šè¿°è¿™äº›éƒ½é…ç½®å®Œæˆåï¼Œä½ çš„æœºå™¨äººå°±é…ç½®å¥½äº†

å¦‚æœå¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œä¹Ÿå¯ä»¥æ‰«ç æˆ‘çš„å…¬ä¼—å·ï¼Œæ„Ÿè°¢å…³æ³¨ï¼

![image99.png](./doc/image99.png)

## FAQ

## ç‰ˆæœ¬æ›´æ–°è®°å½•

### v0.1

- add æ”¯æŒè®°å¿†å¤šè½®å¯¹è¯ä¸è®°å¿†æ¸…ç†
- fix å¯¹éæ–‡æœ¬æ ¼å¼æ•°æ®è¿›è¡Œå›å¤æ‹’ç»

ä¸ºäº†æ”¯æŒå¤šè½®å¯¹è¯ï¼Œæ–°å¢èœå•é…ç½®  ä¼ä¸šå¾®ä¿¡>åº”ç”¨ç®¡ç†>è‡ªå®šä¹‰èœå•
![image14.png](./doc/image14.png)
æ•ˆæœå¦‚ä¸‹
![image15.png](./doc/image15.png)
